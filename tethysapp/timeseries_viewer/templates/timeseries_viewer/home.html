{% extends "timeseries_viewer/base.html" %}
{% load staticfiles%}


{%block title%}
CUAHSI Time Series Viewer
{%endblock%}

{% block app_content_wrapper_override %}
<!-- Modal  -->
<!--<button id = 'hello'  type="button" class="btn btn-primary">Primary</button>-->
<div class="modal fade" id="help-modal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Welcome to the CUAHSI Data Series Viewer!</h4>
            </div>
            <div class="modal-body">
                <div id="welcome-info">
                    <p>
                        <!--This app should be launched from the HydroClient page on <a href='http://bcc-hiswebclient.azurewebsites.net'>CUAHSI</a>-->
                        This app should be launched from the HydroClient page on <a href='http://data.cuahsi.org/'>CUAHSI</a>
                    </p>
                    <ol>
                        <h6>1. Go to the CUAHSI HydroClient page</h6>
                        <p>Use the map to search for the site of interest</p>
                        <h6>2. Select time series</h6>
                        <p>Select the time series from the search results</p>
                        <h6>3. Launch the time series viewer</h6>
                        <p>In your workspace, select the time series for visualization, choose Time series viewer, and launch tool.</p>
                        <!--<a class="btn btn-default" href='http://bcc-hiswebclient.azurewebsites.net'>Go to CUAHSI HydroClient website</a>-->
                        <a class="btn btn-default" href='http://data.cuahsi.org/'>Go to CUAHSI HydroClient website</a>
                    </ol>
                </div>
            </div>
            <div class="modal-footer">
                <div id="byu-logo-container">
                    <img src="{% static 'timeseries_viewer/images/byu-medallion.png' %}"/><span><i>Developed at the BYU Hydroinformatics Lab</i></span>
                </div>
                <a href="https://github.com/CUAHSI/timeseries_viewer" type="button" class="btn btn-default" target="_blank" >Source Code</a>
                <button type="button" class="btn btn-default" id="close-popup" data-dismiss="modal" >Close</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal -->
<div class="modal fade" id="unit_selector" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
                <h4 class="modal-title">This application only displays two different units types at a time.</h4>
            </div>
            <div class="modal-body">
                <div id="unit_selector_info">

                </div>
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-default" id="close-popup1" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Add HS Resource Modal -->
    <div id="modalLoadRes" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Add HydroShare Resource</h4>
                </div>
                <div class="modal-body">
                    <img src="/static/hydroshare_gis/images/loading-animation.gif">
                    <br>
                    <p><b>Loading resource list...</b></p>

                     <table id="hs_resource_table" class="display" cellspacing="0" width="100%">
                        <thead>
                        <tr>
                            <!--<th></th>-->
                            <th></th>
                            <th>Title</th>
                            <th>Type</th>
                            <th>Author</th>
                            <th>Last Updated</th>
                            <!--<th>Download Data</th>-->
                        </tr>
                        </thead>
                        <tfoot><tr>

                            <th></th>
                            <th>Title</th>
                            <th>Type</th>
                            <th>Author</th>
                            <th>Last Updated</th>
                            <!--<th>Download Data</th>-->
                        </tr></tfoot>
                    </table>

                </div>
                <div class="modal-footer">
                    <div class="button-group flex1-0">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" id="btn-upload-res" class="btn btn-success btn-upload" onClick = "get_hs_res()" >Add</button>
                    </div>
                </div>
            </div>
            <!--End modal content-->
        </div>
    </div>
    <!--End modal-->
{{block.super}}

{% endblock %}

{% block app_content %}

<!--
<!--<div id = chart_cont>-->
<!--<div id ='chartDiv'></div>-->
<!--</div>-->
<div id="error-message"></div>
<!--<div id="ts-chart" class="highcharts-plot"></div>-->
<div id = 'chart' style='height:600px;width:100% '>
    <div id="chartContainer"></div>
</div>


<!--<button class='btn btn-danger' id='reset' >Reset</button>-->

<div id = "stat_div" >
    <button type="button" class="btn btn-info "  data-toggle="modal" data-target="#help-modal" style="float: right; position:relative">
        <span id = 'get_data_span' data-toggle="tooltip" data-placement="bottom" title = "Get Data for New Selection" class="glyphicon glyphicon-question-sign"></span>
    </button>
     <button type="button" class="btn btn-info "  data-toggle="modal" data-target="#modalLoadRes" style="float: left; position:relative" onClick = "get_list_hs_res()">
        <span id = 'get_hs_resource' data-toggle="tooltip" data-placement="bottom" title = "Get Data for New Selection" class="glyphicon glyphicon-question-sign"></span>
    </button>
    <!--<div>*All times are displayed in local time</div>-->

    <table id="data_table" class="display" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th> <div style='text-align:center'><input class = 'checkbox' id ='master_chk' name ='master_chk' data-resid =" + res_id
                    + " type='checkbox' onClick ='series_visiblity_toggle(this.id,this.name);'checked = 'checked'></div></th>
            <!--<th></th>-->
            <th></th>
            <th>Organization</th>
            <th>Site Name</th>
            <th>Variable</th>
            <th>Variable Unit</th>
            <th>Quality Control</th>
            <th>Value Count</th>
            <!--<th>Download Data</th>-->
        </tr>
        </thead>
        <tfoot><tr>
            <th> </th>
            <th></th>
            <th>Organization</th>
            <th>Site Name</th>
            <th>Variable</th>
            <th>Variable Unit</th>
            <th>Quality Control</th>
            <th>Value Count</th>

            <!--<th>Download Data</th>-->
        </tr></tfoot>
    </table>
    <div id = 'multiple_units'></div>
</div>



<div id = loading>

    <div class="cssload-loader">
        <div class="cssload-dot"></div>
        <div class="cssload-dot"></div>
        <div class="cssload-dot"></div>
        <div class="cssload-dot"></div>
        <div class="cssload-dot"></div>
    </div>
</div>
<!--{% if request.user.is_superuser %}-->
    <!--...-->
    <!--<button>...</button>-->
    <!--...-->
<!--{% else %}-->
<!--{%endif%}-->

{% endblock %}
{% block app_actions %}
{% endblock %}
{% block scripts %}
<script src="/static/tethys_gizmos/vendor/highcharts/js/highcharts.js"></script>
<script src="/static/tethys_gizmos/vendor/highcharts/js/highcharts-more.js"></script>
<script src="/static/tethys_gizmos/vendor/highcharts/js/modules/exporting.js"></script>

<script src="{% static 'timeseries_viewer/js/main.js' %}"></script>

<script src="{% static 'timeseries_viewer/js/canvasjs.min.js' %}" type="text/javascript"></script>
<script src="{% static 'timeseries_viewer/js/jquery.canvasjs.min.js' %}" type="text/javascript"></script>

<script src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>
<link href = 'https://cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css' rel ='stylesheet'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.10.16/api/column().title().js"></script>

<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
{{ block.super }}
{% endblock %}

